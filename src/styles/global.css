@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
  }

  [data-effective-theme="dark"] {
    color-scheme: dark;
  }

  html {
    @apply font-sans;
  }

  body {
    @apply bg-brand-light text-slate-900 antialiased;
  }

  [data-effective-theme="dark"] body {
    @apply bg-brand-dark text-slate-100;
  }

  a {
    @apply text-accent underline-offset-2 transition-colors duration-150;
  }

  a:hover {
    @apply text-accent-dark;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-serif text-slate-900 dark:text-white;
  }

  code {
    @apply rounded bg-slate-200 px-1.5 py-0.5 font-mono text-sm text-slate-800 dark:bg-slate-700 dark:text-slate-100;
  }

  pre {
    @apply overflow-x-auto rounded-xl bg-slate-900 p-4 text-slate-100 shadow-lg;
  }

  pre code {
    @apply bg-transparent p-0 text-inherit shadow-none;
  }

  kbd {
    @apply rounded border border-slate-300 bg-slate-100 px-1.5 py-0.5 text-xs font-medium text-slate-700 shadow-sm dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200;
  }
}

@layer components {
  .callout {
    @apply my-4 rounded-xl border border-slate-200 bg-white p-4 text-sm leading-relaxed shadow-sm transition dark:border-slate-700 dark:bg-slate-800/70;
  }

  .callout-title {
    @apply mb-2 flex items-start gap-2 font-semibold text-slate-700 dark:text-slate-200;
  }

  .callout-content {
    @apply space-y-2 text-slate-600 dark:text-slate-300;
  }

  .result-item {
    @apply transition-transform duration-150;
  }

  .result-item:hover {
    @apply translate-x-1;
  }

  .toc-link.active,
  .mobile-toc-link.active {
    @apply border-accent text-accent dark:text-accent-dark;
  }

  .toc-sublist.expanded {
    @apply max-h-[999px];
  }

  .desktop-toc.collapsed {
    @apply w-12 min-w-[3rem] overflow-hidden;
  }

  .desktop-toc.collapsed .toc-header h4,
  .desktop-toc.collapsed .toc-list {
    @apply hidden;
  }

  .desktop-toc.collapsed .toc-collapse-btn {
    @apply rotate-180;
  }

  .mobile-toc-header {
    @apply -translate-y-full;
  }

  .mobile-toc-header.visible {
    @apply translate-y-0;
  }

  .mobile-toc-overlay.visible {
    @apply visible opacity-100;
  }

  .mobile-toc-overlay.visible .mobile-toc-content {
    @apply translate-x-0;
  }

  .result-item.selected {
    @apply border-accent bg-accent/10 text-slate-900 dark:border-accent-dark dark:bg-accent/20 dark:text-slate-100;
  }

  .sub-result-item {
    @apply ml-2 cursor-pointer rounded-lg border-l-2 border-accent/40 px-4 py-2 pl-8 text-sm text-slate-600 transition-colors duration-150 hover:bg-accent/10 dark:text-slate-300 dark:hover:bg-accent/20;
  }

  .sun,
  .moon,
  .system {
    display: none;
  }

  [data-theme="light"] .sun {
    display: block;
  }

  [data-theme="dark"] .moon {
    display: block;
  }

  [data-theme="system"] .system {
    display: block;
  }

  [data-callout="warning"],
  [data-callout="attention"],
  [data-callout="caution"],
  [data-callout="danger"],
  [data-callout="error"],
  [data-callout="bug"] {
    --callout-color: theme(colors.amber.500);
  }

  [data-callout="question"],
  [data-callout="help"],
  [data-callout="faq"] {
    --callout-color: theme(colors.blue.500);
  }

  [data-callout="example"],
  [data-callout="quote"],
  [data-callout="cite"] {
    --callout-color: theme(colors.violet.500);
  }

  [data-callout] .callout-title {
    @apply text-[color:var(--callout-color)] dark:text-[color:var(--callout-color)];
  }

  [data-callout] .callout {
    @apply border-[color:var(--callout-color)]/40 bg-[color:var(--callout-color)]/10 dark:border-[color:var(--callout-color)]/40 dark:bg-[color:var(--callout-color)]/10;
  }

  header.headroom--unpinned {
    @apply -translate-y-full;
  }

  header.headroom--pinned {
    @apply translate-y-0;
  }
}

@layer utilities {
  .animate-fade-scale {
    @apply animate-fade-scale;
  }

  .word-slide-in {
    @apply inline-block animate-word-slide-in;
  }
}
